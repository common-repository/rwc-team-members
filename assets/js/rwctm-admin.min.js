/**
 * Admin JavaScript
 *
 * This JavaScript file contains scripts specific to the admin section of the
 * "RWC Team Members" plugin. These scripts enhance the functionality and
 * user experience of the plugin's backend pages, providing interactive features
 * and dynamic behavior for administrators.
 *
 * @package RWC Team Members - v0.5 - 25 July, 2024
 */
function copyShortcode(a){"use strict";var a,b=document.getElementById("rwctmInput-"+a);b.select(),document.execCommand("copy");var c=document.getElementById("rwctmTooltip-"+a);c.innerHTML="Copied!"}function outFunc(){"use strict";var a,b=document.getElementById("rwctmTooltip-"+a);b.innerHTML="Click to Copy Shortcode!"}jQuery(document).ready(function(a){"use strict";a(".team_name span").css("display","none"),a(".team_name").mouseover(function(){var b=a(this).attr("id");a("td#"+b+" span").css("display","inline-block")}),a(".team_name").mouseout(function(){var b=a(this).attr("id");a("td#"+b+" span").css("display","none")}),a("#rwctm-tabs").tabs(),a("#rwctm-tabs").css("visibility","visible"),a("#default_font").is(":checked")?a("#user_choice_font").css("display","none"):a("#user_choice_font").css("display","inline-block"),a("#default_font").click(function(){var b=a(this).is(":checked");b?a("#user_choice_font").slideUp("slow"):a("#user_choice_font").slideDown("slow")}),a(function(){if(a("#rwctm-fancy-textarea").length){var b=wp.codeEditor.defaultSettings?_.clone(wp.codeEditor.defaultSettings):{};b.codemirror=_.extend({},b.codemirror,{autoRefresh:!0,mode:"css"});var c=wp.codeEditor.initialize(a("#rwctm-fancy-textarea"),b);setTimeout(function(){c.codeMirrorInstance.refresh()},1)}}),a("#wp_post_editor").is(":checked")?a("#htmleditor").css("display","block"):a("#htmleditor").css("display","none"),a("#wp_post_editor").click(function(){var b=a(this).is(":checked");b?a("#htmleditor").slideDown("slow"):a("#htmleditor").slideUp("slow")}),a(".activate_team").on("click",function(){a.rwctmactivatetemp()}),a(".rwctm_remove").on("click",function(){a.rwctmdeleteteam()}),a(".rwctm_template").on("change",function(){a.rwctmtemplate()}),a(".duplicate_team").on("click",function(){a.rwctmcopyteams()}),a(".regen_shortcode").on("click",function(){a.rwctmregenshortcode()}),a(".rwctm_activity").on("click",function(){a.rwctmeditactivity()}),a(".view_team").on("click",function(){a.rwctmviewteam()}),a(".process_team").on("click",function(){a.rwctmsetupmember()}),a(".demo_link").on("click",function(b){b.preventDefault();var c=a(this).attr("href");if(c){var d='<div id="rwctm-modal-container">';d+='<div id="rwctm-modal-content">',d+='<img src="'+c+'" alt="Demo Image">',d+="</div>",d+="</div>",a("body").append(d),a("#rwctm-modal-container").fadeIn("slow"),a("#rwctm-modal-container").on("click",function(){a(this).fadeOut("slow",function(){a(this).remove()})})}})}),function(a){"use strict";a.rwctmactivatetemp=function(){var b;a("body").on("click",".activate_team",function(){b=a(this).attr("data-count"),a.ajax({type:"POST",url:rwctmajax.ajaxurl,data:{action:"rwctm_activate_template",tempcount:b,nonce:rwctmajax.nonce},beforeSend:function(){a("#rwctm-loading-image").css("display","inline-block")},success:function(){alert("Successfully Activated!"),window.location.reload()},complete:function(){a("#rwctm-loading-image").hide()},error:function(a,b,c){alert(c)}})})},a.rwctmdeleteteam=function(b){var c;a("body").on("click",".rwctm_remove",function(){c=a(this).attr("data-id");var d=confirm("Are you sure you want to delete?");d===!0?(a.ajax({type:"POST",url:rwctmajax.ajaxurl,data:{action:"rwctm_delete_selected_team",teamname:c,nonce:rwctmajax.nonce},beforeSend:function(){a("#rwctm-loading-image").css("display","inline-block")},success:function(b){var f="#rwctm_"+c;a(f).remove(),a(f).append(b),window.location.reload()},complete:function(){a("#rwctm-loading-image").hide()},error:function(a,b,c){alert(c)}}),b.preventDefault()):window.location.reload()})},a.rwctmtemplate=function(){var b;a("body").on("click",".rwctm_template",function(){b=a(this).attr("data-id");var c=confirm("Are you sure you want to setup this template?");c===!0?a.ajax({type:"POST",url:rwctmajax.ajaxurl,data:{action:"rwctm_setup_selected_template",teamname:b,template:this.value,nonce:rwctmajax.nonce},beforeSend:function(){a("#rwctm-loading-image").css("display","inline-block")},success:function(){alert("The template has been successfully setup!"),window.location.reload()},complete:function(){a("#rwctm-loading-image").hide()},error:function(a,b,c){alert(c)}}):window.location.reload()})},a.rwctmcopyteams=function(){var b,c;a("body").on("click",".duplicate_team",function(){b=a(this).attr("data-id"),c=a(this).attr("data-count");var d=confirm("Are you sure you want to duplicate this team?");d===!0?a.ajax({type:"POST",url:rwctmajax.ajaxurl,data:{action:"rwctm_copy_existed_team",teamname:b,membcount:c,nonce:rwctmajax.nonce},beforeSend:function(){a("#rwctm-loading-image").css("display","inline-block")},success:function(){alert("Team Copied Successfully!"),window.location.reload()},complete:function(){a("#rwctm-loading-image").hide()},error:function(a,b,c){alert(c)}}):window.location.reload()})},a.rwctmregenshortcode=function(){var b=confirm("Are you sure you want to Regenerate Shortcode IDs?");b===!0?jQuery.ajax({type:"POST",url:rwctmajax.ajaxurl,data:{action:"rwctm_regenerate_shortcode",nonce:rwctmajax.nonce},beforeSend:function(){a("#rwctm-loading-image").css("display","inline-block")},success:function(){alert("Successfully Regenerated Shortcode ID!"),window.location.reload()},complete:function(){a("#rwctm-loading-image").hide()},error:function(a,b,c){alert(c)}}):window.location.reload()},a.rwctmsetupmember=function(){var b,c;a("body").on("click",".process_team",function(){b=a(this).attr("data-id"),c=a(this).attr("data-count"),a.ajax({type:"POST",url:rwctmajax.ajaxurl,data:{action:"rwctm_process_team_members",teamname:b,nonce:rwctmajax.nonce},beforeSend:function(){a("#rwctm-loading-image").css("display","inline-block")},success:function(b){var f="#rwctm_list";a(f).html(""),a("#new_team").hide(),a("#rwctm-sidebar").hide(),a("#rwctm-narration").hide(),a(".team_list .subsubsub").hide(),a(".regen_shortcode").hide(),a(f).append(b),a("#form-messages").hide(),a(".collapse").hide(),a("#rwctm-tabs").tabs(),a("#memb-section,#memb-status").selectize({maxItems:3}),a("#border_style,#image_size,#filter_align,#max_column,#max_coltab,#max_colmob,#thumbnail_align,#thumbcap_align").selectize(),a(".cs-inactive").hide(),a(".common-settings").hide(),a(".cs-inactive").click(function(){a(".common-settings").slideUp("slow"),a(this).hide(),a(".cs-active").show()}),a(".cs-active").click(function(){a(".common-settings").slideDown("slow"),a(this).hide(),a(".cs-inactive").show()}),a(".collapse").click(function(){a(".column_container").accordion({collapsible:!0,active:!1}),a(".member_advance").accordion({collapsible:!0,active:!1}),a(".common-settings").slideUp("slow"),a(".cs-inactive").hide(),a(".cs-active").show(),a(".collapse").hide(),a(".expand").show()}),a(".expand").click(function(){a(".column_container").accordion({collapsible:!1,active:!0}),a(".member_advance").accordion({collapsible:!1,active:!0}),a(".common-settings").slideDown("slow"),a(".cs-active").hide(),a(".cs-inactive").show(),a(".expand").hide(),a(".collapse").show()});var g=a(".enable_image input[type='checkbox']"),h=a(".img_margin_auto input[type='checkbox']"),i=a("select[id='image_size'] option:selected").val();a("#img-features").hide(),a("#img-custom").hide(),g.click(function(){a("#enable_image").is(":checked")?(a("#img-features").slideDown("slow"),"custom"===i?a("#img-custom").slideDown("slow"):a("#img-custom").slideUp("slow")):a("#img-features").slideUp("slow")}),a("#enable_image").is(":checked")&&(a("#img-features").css("display","block"),"custom"===i?a("#img-custom").css("display","block"):a("#img-custom").css("display","none")),a("select").change(function(){var b=a("select[id='image_size'] option:selected").val();"custom"===b?a("#img-custom").slideDown("slow"):a("#img-custom").slideUp("slow")}),h.click(function(){a("#img_margin_auto").is(":checked")?a(".image_margin").slideUp("slow"):a(".image_margin").slideDown("slow")}),jQuery("#img_margin_auto").is(":checked")&&a(".image_margin").css("display","none");var j=a(".layout-style input[type='radio']");a("#slider-option").hide(),j.click(function(){a("#marked_layout_slide").is(":checked")?(a("#marked_layout_slide").parent(".labelexpanded").addClass("slider-before"),a("#slider-option").slideDown("slow")):(a("#marked_layout_slide").parent(".labelexpanded").removeClass("slider-before"),a("#slider-option").slideUp("slow"))}),a("#marked_layout_slide").is(":checked")&&(a("#marked_layout_slide").parent(".labelexpanded").addClass("slider-before"),a("#slider-option").css("display","block"));var k=a(".slider_aplay input[type='checkbox']");a("#slider-apspeed").hide(),k.click(function(){a("#slider_aplay").is(":checked")?a("#slider-apspeed").slideDown("slow"):a("#slider-apspeed").slideUp("slow")}),a("#slider_aplay").is(":checked")&&a("#slider-apspeed").css("display","block");var l=a(".layout-style input[type='radio']");a(".popup_choice").hide(),l.click(function(){a("#marked_layout_popup").is(":checked")?a(".popup_choice").slideDown("slow"):a(".popup_choice").slideUp("slow")}),a("#marked_layout_popup").is(":checked")&&a(".popup_choice").css("display","block");var m=a(".enable_filter input[type='checkbox']");a("#filter-nav").hide(),m.click(function(){a("#enable_filter").is(":checked")?a("#filter-nav").slideDown("slow"):a("#filter-nav").slideUp("slow")}),a("#enable_filter").is(":checked")&&a("#filter-nav").css("display","block"),1===c&&(a("#rwctm-1 #delMember").attr("id","delDisable"),a("#rwctm-1 #hideMemb").attr("class","inactive")),a(".team_list").css("width","100%"),a("#add_new_team h2").text("Edit RWC Team Member"),a(".postbox-container").css("width","100%"),a(function(){a("#sortable_column").sortable({cancel:".column_container"}),a("#sortable_column input, #sortable_column textarea").on("touchstart",function(b){b.preventDefault(),a(this).focus();var c=a(this).val();a(this).val("").val(c)})}),a(".member_details").css("cursor","move"),a("#accordion_advance").accordion({collapsible:!0,active:!1,heightStyle:"content"});for(var n=1;n<=c;n++)a("#accordion"+n).accordion({collapsible:!0,active:!1,heightStyle:"content"}),"hide"===a("#showMemb"+n+" input").val()&&a("#accordion"+n).hide();a(".team_bg").wpColorPicker(),a(".ribbon_bg").wpColorPicker(),a(".sm_fn_color").each(function(){var b=a(this).attr("data-id");a("#social_color_"+b).wpColorPicker()}),a(".sm_hover_colo").wpColorPicker(),a(".rwctm-color-picker").wpColorPicker(),a("#addMember").click(function(){var b=a(".member_details").length,c=Number(b+1),d=a("#rwctm-"+b).clone().attr("id","rwctm-"+c).fadeIn("slow");d.find("#mcolumn"+b).attr("id","mcolumn"+c),d.find("#showMemb"+b).attr("id","showMemb"+c),d.find("#hideMemb"+b).attr("id","hideMemb"+c),d.find("#accordion"+b).attr("id","accordion"+c),d.find("#memb-section").attr("name","memb_department_["+c+"]"),d.find("#memb-status").attr("name","memb_designation["+c+"]"),d.find("#member-options"+b).attr("id","member-options"+c),d.find("#member-options"+c).attr("value","memberOptions"+c),d.find("#member-id").attr("value",c),d.find("#order-id").attr("value",c),a("#rwctm-"+b).after(d),a(".mtitle").focus(),a("#accordion"+c).accordion({collapsible:!0,heightStyle:"content"}),a("#mcolumn"+c).text("Team Member "+c),a("#accordion"+c+" .wp-color-result").remove(),a(".team_bg").wpColorPicker(),a(".ribbon_bg").wpColorPicker(),a(".mb_exp_color").wpColorPicker(),a(".sm_hover_colo").wpColorPicker(),a("#rwctm-1 #delDisable").attr("id","delMember"),a("#rwctm-"+c+" #delDisable").attr("id","delMember"),a(".inactive").attr("class","column_hide")}),a.rwctmMediaUploader(),a("body").on("click","#remove_image",function(){var b=a(this).parents(".element-input").find("#image_path");a(b).val(""),a(this).parents("#show_upload_preview").slideUp("slow")}),a("body").on("click","#delMember",function(){var b=a(".member_details").length,c=confirm("Are you sure you wish to remove this member? This cannot be undone!");c&&a(this).parents(".member_details").slideUp("slow",function(){a(this).remove(),b-1===1&&(a("#delMember").attr("id","delDisable"),a(".column_hide").attr("class","column_hide inactive"),a(".member_details").css("cursor","auto"),a("#sortable_column").sortable({disabled:!0})),a("#addMember").attr("disabled",!1).prop("value","New Column");var c=1;for(n=1;n<=b;n++)0!==a("#rwctm-"+n).length&&(a("#rwctm-"+n).attr("id","rwctm-"+c),a("#mcolumn"+n).text("Team Member "+c),a("#mcolumn"+n).attr("id","mcolumn"+c),a("#hideMemb"+n).attr("id","hideMemb"+c),a("#showMemb"+n).attr("id","showMemb"+c),a("#accordion"+n).attr("id","accordion"+c),c++)})}),a("body").on("click",".column_hide",function(){var b=a(".member_details").length;b>1&&(a(this).parents(".member_details").find(".column_container").fadeOut("slow"),a(this).prop("class","column_show"),a(this).children(".dashicons-fullscreen-alt").prop("class","dashicons dashicons-fullscreen-exit-alt"),a(this).children("input").prop("value","hide"))}),a("body").on("click",".column_show",function(){a(this).parents(".member_details").find(".column_container").fadeIn("slow"),a(this).prop("class","column_hide"),a(this).children(".dashicons-fullscreen-exit-alt").prop("class","dashicons dashicons-fullscreen-alt"),a(this).children("input").prop("value","show")}),a("#rwctm_save").on("click",function(){a.rwctmsetmemberoptions()})},complete:function(){a("#rwctm-loading-image").hide()},error:function(a,b,c){alert(c)}})}),"undefined"!==typeof a.wp&&"undefined"!==typeof a.wp.wpColorPicker&&(a.wp.wpColorPicker.prototype.options={width:255,hide:!0,border:!1,palettes:["#ededed","#ecf0f1","#c8d6e5","#7f8c8d","#34495e","#22313f","#2ecc71","#48b56a","#0abde3","#1f8dd6","#2574a9","#1f3a93","#5f27cd","#fad232","#ff9f43","#ed6789","#ff6b6b","#ee5253"]})},a.rwctmsetmemberoptions=function(){var b=a("#submitted").val();const c=a("#rwctm_edit_form"),d=a("#form-messages");c.on("submit",function(e){e.preventDefault();const f=a(this).serialize();a.ajax({type:"POST",url:a(this).attr("action"),data:f,success:function(){a(d).addClass("success").css("display","block"),a(c).hide().fadeIn(1e3),a("html, body").animate({scrollTop:0},0),a("body").on("click",".rwctm_close",function(){a(d).fadeOut("slow")}),"no"===b&&window.location.reload()},error:function(a,b,c){alert("An error occurred: "+b+" - "+c)}})})},a.rwctmeditactivity=function(){var b;a("body").on("click",".rwctm_activity",function(){b=a(this).attr("data-id"),a.ajax({type:"POST",url:rwctmajax.ajaxurl,data:{action:"rwctm_process_activity_option",teamname:b,nonce:rwctmajax.nonce},beforeSend:function(){a("#rwctm-loading-image").css("display","inline-block")},success:function(b){var e="#rwctm_list";a(e).html(""),a("#new_team").hide(),a("#rwctm-sidebar").hide(),a("#rwctm-narration").hide(),a(".team_list .subsubsub").hide(),a(".regen_shortcode").hide(),a(e).append(b),a("#add_new_team h2").text("Edit RWC Team Member Activities"),a.rwctmSelectOption();var f=a("#activity_edititem");a("body").on("click","#editactivity",function(){return a('<tr class="activitybody"><td><span>Name:</span><input type="text" name="activity_name[]" placeholder="Enter Activity Name" size="15" required /></td><td><span>https://</span><input type="text" name="activity_link[]" value="" placeholder="Enter Activity URL" size="25" /></td><td><input type="text" name="awesome_icon[]" value="" placeholder="Enter Icon Class" size="15" /><span>Icon</span></td><td><select name="activity_type[]" id="activity_type"><option value="sector" selected="selected">Sector</option><option value="status">Status</option><option value="social">Social</option></select></td><td><span id="remActivity"></span></td></tr>').appendTo(f),!1}),a("body").on("click","#remActivity",function(){return a(this).parents("tr.activitybody").remove(),!1}),jQuery("body").on("click","#remActivity",function(){var a=jQuery("#activity_edititem tr.activitybody").length;return 1===a&&jQuery("#remActivity").attr("id","remDisable"),jQuery(this).parents("tr.activitybody").remove(),!1}),a(function(){a("#activity_edititem tbody").sortable({helper:function(b,c){return c.children().each(function(){a(this).width(a(this).width())}),c},cancel:"input, select"}),a(".activitybody input").on("touchstart",function(b){b.preventDefault(),a(this).focus();var c=a(this).val();a(this).val("").val(c)})}),a("#rwctm_addactivity").on("click",function(){a.rwctmsetmemberoptions()}),a("#rwctm_upactivity").on("click",function(){a.rwctmsetmemberoptions()})},complete:function(){a("#rwctm-loading-image").hide()},error:function(a,b,c){alert(c)}})})},a.rwctmviewteam=function(){var b,c;a("body").on("click",".view_team",function(){b=a(this).attr("data-id"),c=a(this).attr("data-team"),a.ajax({type:"POST",url:rwctmajax.ajaxurl,data:{action:"rwctm_view_team_member",teamname:c,teamid:b,nonce:rwctmajax.nonce},beforeSend:function(){a("#rwctm-loading-image").css("display","inline-block")},success:function(b){var f="#rwctm_list",g=c.replace("_"," "),h=g.replace(/^([a-z\u00E0-\u00FC])|\s+([a-z\u00E0-\u00FC])/g,function(a){return a.toUpperCase()});a(f).html(""),a("#new_team").hide(),a("#rwctm-sidebar").hide(),a("#rwctm-narration").hide(),a(".team_list .subsubsub").hide(),a(".regen_shortcode").hide(),a(f).append(b),a("#add_new_team h2.main-header").text("Preview of "+h),a(".team_list").css("width","100%"),a(".postbox-container").css("width","100%"),a(".process_team").on("click",function(){a.rwctmsetupmember()})},complete:function(){a("#rwctm-loading-image").hide()},error:function(a,b,c){alert(c)}})})},a.rwctmMediaUploader=function(b){var c=a.extend({target:".rwctm-uploader",uploaderTitle:"Select or upload image",uploaderButton:"Set image",multiple:!1,buttonText:"Upload image",buttonClass:".rwctm-upload",previewSize:"",modal:!1,buttonStyle:{color:"#fff"}},b);a(c.target).append('<a href="#" class="button-primary '+c.buttonClass.replace(".","")+'">'+c.buttonText+"</a>"),a(c.target).append('<div id="show_preview" style="display: none;"><label class="input-image">Preview</label><img class="preview_image" src="#" style="display: none;"><span id="remove_image"></span></div>'),a(c.buttonClass).css(c.buttonStyle),a("body").on("click",c.buttonClass,function(b){b.preventDefault();var d=a(this).parent(c.target),e=wp.media({title:c.uploaderTitle,button:{text:c.uploaderButton},multiple:c.multiple}).on("select",function(){var b=e.state().get("selection").first().toJSON();d.find("#show_preview").slideDown("slow"),d.parents(".element-input").find("#show_upload_preview").hide(),d.find("img").attr("src",b.url).show(),d.find("input").val(b.url),c.modal&&a(".modal").css("overflowY","auto"),a("body").on("click","#remove_image",function(){var b=a(this).parents(".element-input").find("#image_path");a(b).val(""),a(this).parents("#show_preview").slideUp("slow")})}).open()})},a.rwctmSelectOption=function(){a("select").each(function(){var b=a(this),c=a(this).children("option").length;b.addClass("s-hidden"),b.wrap('<div class="select'+(b.attr("data-class")?" "+b.attr("data-class"):"")+'"></div>'),b.after('<div class="styledSelect"></div>');var d=b.next("div.styledSelect"),e=b.children("option:selected"),f=(e.attr("data-photo")?'<img src="'+e.attr("data-photo")+'" />':"")+(e.attr("data-icon")?'<span class="ir ico '+e.attr("data-icon")+'"></span>':"")+e.text();d.html(f),d.addClass(e.val());for(var g=a("<ul />",{"class":"options"}).insertAfter(d),h=0;h<c;h++){var i=(b.children("option").eq(h).attr("data-photo")?'<img src="'+b.children("option").eq(h).attr("data-photo")+'" />':"")+(b.children("option").eq(h).attr("data-icon")?'<span class="ir ico '+b.children("option").eq(h).attr("data-icon")+'"></span>':"")+b.children("option").eq(h).text(),j=b.children("option").eq(h);a("<li />",{html:i,rel:b.children("option").eq(h).val(),"class":(e.val()==j.val()?"active":"")+(j.attr("disabled")?" disabled":""),"data-photo":j.attr("data-photo"),"data-icon":j.attr("data-icon")}).appendTo(g)}var k=g.children("li");b.attr("data-error")&&b.parent().append('<div class="select__error">'+b.attr("data-error")+'</div><div class="select__ico select__ico--error"></div></div><div class="select__ico select__ico--ok"></div>'),d.click(function(b){b.stopPropagation(),a(this).hasClass("active")||a("div.styledSelect.active").each(function(){a(this).removeClass("active").next("ul.options").hide()}),a(this).toggleClass("active").next("ul.options").toggle()}),k.click(function(c){c.stopPropagation();var e=a(this);if(!e.hasClass("disabled")){var f=(e.attr("data-photo")?'<img src="'+e.attr("data-photo")+'" />':"")+(e.attr("data-icon")?'<span class="ir ico '+e.attr("data-icon")+'"></span>':"")+e.text();d.html(f).removeClass("active"),b.val()!=a(this).attr("rel")&&b.val(a(this).attr("rel")).change(),g.hide()}}),a(document).click(function(){d.removeClass("active"),g.hide()})})}}(jQuery);